{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\rtsp-overlay-app\\\\frontend\\\\src\\\\components\\\\Player.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport Hls from 'hls.js';\nimport OverlayEditor from './OverlayEditor';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Player({\n  hlsUrl\n}) {\n  _s();\n  const videoRef = useRef(null);\n  const [overlays, setOverlays] = useState([]);\n  useEffect(() => {\n    const v = videoRef.current;\n    if (!v) return;\n    if (Hls.isSupported()) {\n      const hls = new Hls();\n      hls.loadSource(hlsUrl);\n      hls.attachMedia(v);\n    } else if (v.canPlayType('application/vnd.apple.mpegurl')) {\n      v.src = hlsUrl;\n    }\n  }, [hlsUrl]);\n  useEffect(() => {\n    fetch('/api/overlays').then(r => r.json()).then(setOverlays).catch(() => setOverlays([]));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"player-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        controls: true,\n        style: {\n          width: '100%'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this), overlays.map(o => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overlay\",\n        style: {\n          position: 'absolute',\n          left: o.x + 'px',\n          top: o.y + 'px',\n          width: o.width + 'px',\n          height: o.height + 'px',\n          pointerEvents: 'none'\n        },\n        children: o.type === 'text' ? o.content : /*#__PURE__*/_jsxDEV(\"img\", {\n          src: o.content,\n          alt: \"logo\",\n          style: {\n            width: '100%',\n            height: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 46\n        }, this)\n      }, o._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(OverlayEditor, {\n      onSaved: () => {/* no-op for now */}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n}\n_s(Player, \"GocPXkdBehe3zWc2iHHNActLUgc=\");\n_c = Player;\nvar _c;\n$RefreshReg$(_c, \"Player\");","map":{"version":3,"names":["React","useRef","useEffect","useState","Hls","OverlayEditor","jsxDEV","_jsxDEV","Player","hlsUrl","_s","videoRef","overlays","setOverlays","v","current","isSupported","hls","loadSource","attachMedia","canPlayType","src","fetch","then","r","json","catch","className","children","ref","controls","style","width","fileName","_jsxFileName","lineNumber","columnNumber","map","o","position","left","x","top","y","height","pointerEvents","type","content","alt","_id","onSaved","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/rtsp-overlay-app/frontend/src/components/Player.js"],"sourcesContent":["import React, {useRef, useEffect, useState} from 'react'\nimport Hls from 'hls.js'\nimport OverlayEditor from './OverlayEditor'\n\nexport default function Player({hlsUrl}){\n  const videoRef = useRef(null)\n  const [overlays, setOverlays] = useState([])\n\n  useEffect(()=>{\n    const v = videoRef.current\n    if (!v) return\n    if (Hls.isSupported()){\n      const hls = new Hls()\n      hls.loadSource(hlsUrl)\n      hls.attachMedia(v)\n    } else if (v.canPlayType('application/vnd.apple.mpegurl')){\n      v.src = hlsUrl\n    }\n  }, [hlsUrl])\n\n  useEffect(()=>{\n    fetch('/api/overlays').then(r=>r.json()).then(setOverlays).catch(()=>setOverlays([]))\n  }, [])\n\n  return (\n    <div className=\"player-wrapper\">\n      <div className=\"video-container\">\n        <video ref={videoRef} controls style={{width: '100%'}} />\n        {overlays.map(o=> (\n          <div key={o._id}\n               className=\"overlay\"\n               style={{position:'absolute', left: o.x + 'px', top: o.y + 'px', width: o.width + 'px', height: o.height + 'px', pointerEvents: 'none'}}>\n            {o.type === 'text' ? o.content : <img src={o.content} alt=\"logo\" style={{width:'100%',height:'100%'}} />}\n          </div>\n        ))}\n      </div>\n      <OverlayEditor onSaved={()=>{/* no-op for now */}} />\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}