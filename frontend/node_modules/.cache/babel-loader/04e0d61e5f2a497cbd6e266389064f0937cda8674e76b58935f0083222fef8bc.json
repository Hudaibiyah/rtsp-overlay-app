{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\rtsp-overlay-app\\\\frontend\\\\src\\\\components\\\\Player.js\";\nimport React from 'react';\nimport { Rnd } from 'react-rnd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function OverlayEditor({\n  overlays = [],\n  setOverlays\n}) {\n  // Add new text overlay\n  const addText = async () => {\n    try {\n      const payload = {\n        name: 'New text',\n        type: 'text',\n        content: 'Hello',\n        x: 10,\n        y: 10,\n        width: 150,\n        height: 40\n      };\n      const res = await fetch('/api/overlays', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) throw new Error('Failed to add overlay');\n      const data = await res.json();\n      setOverlays(prev => [...prev, data]);\n    } catch (err) {\n      console.error('Error adding overlay:', err);\n    }\n  };\n\n  // Save overlay updates\n  const saveItem = async (id, updates) => {\n    try {\n      const exists = overlays.find(o => o._id === id);\n      if (!exists) return; // skip if overlay deleted\n\n      // Remove _id before sending PUT request\n      const {\n        _id,\n        ...payload\n      } = updates;\n      const res = await fetch(`/api/overlays/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) throw new Error(`Failed to save overlay: ${res.statusText}`);\n      const data = await res.json();\n      setOverlays(prev => prev.map(it => it._id === id ? data : it));\n    } catch (err) {\n      console.error('Error saving overlay:', err);\n    }\n  };\n\n  // Delete overlay\n  const deleteItem = async id => {\n    try {\n      await fetch(`/api/overlays/${id}`, {\n        method: 'DELETE'\n      });\n      setOverlays(prev => prev.filter(it => it._id !== id));\n    } catch (err) {\n      console.error('Error deleting overlay:', err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"overlay-editor\",\n    style: {\n      marginTop: '10px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: addText,\n      children: \"Add Text\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editor-canvas\",\n      style: {\n        position: 'relative',\n        width: '100%',\n        height: '300px',\n        border: '1px solid #ccc',\n        marginTop: '10px'\n      },\n      children: overlays.map(it => /*#__PURE__*/_jsxDEV(Rnd, {\n        size: {\n          width: it.width,\n          height: it.height\n        },\n        position: {\n          x: it.x,\n          y: it.y\n        },\n        onDragStop: (e, d) => saveItem(it._id, {\n          ...it,\n          x: d.x,\n          y: d.y\n        }),\n        onResizeStop: (e, direction, ref, delta, position) => saveItem(it._id, {\n          ...it,\n          width: parseInt(ref.style.width),\n          height: parseInt(ref.style.height),\n          x: position.x,\n          y: position.y\n        }),\n        bounds: \"parent\",\n        style: {\n          border: '1px dashed #ddd',\n          background: 'rgba(255,255,255,0.6)'\n        },\n        children: it.type === 'text' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: 4\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: it.content\n            // Update local state immediately\n            ,\n            onChange: e => setOverlays(prev => prev.map(o => o._id === it._id ? {\n              ...o,\n              content: e.target.value\n            } : o))\n            // Save to backend only on blur\n            ,\n            onBlur: e => saveItem(it._id, {\n              ...it,\n              content: e.target.value\n            }),\n            style: {\n              width: '100%',\n              height: '100%',\n              resize: 'none',\n              background: 'transparent',\n              color: 'black',\n              border: '1px solid #ccc',\n              padding: '2px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation(); // prevent Rnd events\n              e.preventDefault(); // prevent onBlur save\n              deleteItem(it._id);\n            },\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          src: it.content,\n          alt: \"overlay\",\n          style: {\n            width: '100%',\n            height: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 15\n        }, this)\n      }, it._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_c = OverlayEditor;\nvar _c;\n$RefreshReg$(_c, \"OverlayEditor\");","map":{"version":3,"names":["React","Rnd","jsxDEV","_jsxDEV","OverlayEditor","overlays","setOverlays","addText","payload","name","type","content","x","y","width","height","res","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","prev","err","console","error","saveItem","id","updates","exists","find","o","_id","statusText","map","it","deleteItem","filter","className","style","marginTop","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","position","border","size","onDragStop","e","d","onResizeStop","direction","ref","delta","parseInt","bounds","background","padding","value","onChange","target","onBlur","resize","color","stopPropagation","preventDefault","src","alt","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/rtsp-overlay-app/frontend/src/components/Player.js"],"sourcesContent":["import React from 'react';\nimport { Rnd } from 'react-rnd';\n\nexport default function OverlayEditor({ overlays = [], setOverlays }) {\n\n  // Add new text overlay\n  const addText = async () => {\n    try {\n      const payload = {\n        name: 'New text',\n        type: 'text',\n        content: 'Hello',\n        x: 10,\n        y: 10,\n        width: 150,\n        height: 40\n      };\n\n      const res = await fetch('/api/overlays', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n\n      if (!res.ok) throw new Error('Failed to add overlay');\n\n      const data = await res.json();\n      setOverlays(prev => [...prev, data]);\n\n    } catch (err) {\n      console.error('Error adding overlay:', err);\n    }\n  };\n\n  // Save overlay updates\n  const saveItem = async (id, updates) => {\n    try {\n      const exists = overlays.find(o => o._id === id);\n      if (!exists) return; // skip if overlay deleted\n\n      // Remove _id before sending PUT request\n      const { _id, ...payload } = updates;\n\n      const res = await fetch(`/api/overlays/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n\n      if (!res.ok) throw new Error(`Failed to save overlay: ${res.statusText}`);\n      const data = await res.json();\n\n      setOverlays(prev => prev.map(it => it._id === id ? data : it));\n\n    } catch (err) {\n      console.error('Error saving overlay:', err);\n    }\n  };\n\n  // Delete overlay\n  const deleteItem = async (id) => {\n    try {\n      await fetch(`/api/overlays/${id}`, { method: 'DELETE' });\n      setOverlays(prev => prev.filter(it => it._id !== id));\n    } catch (err) {\n      console.error('Error deleting overlay:', err);\n    }\n  };\n\n  return (\n    <div className=\"overlay-editor\" style={{ marginTop: '10px' }}>\n      <button onClick={addText}>Add Text</button>\n\n      <div className=\"editor-canvas\" style={{ position: 'relative', width: '100%', height: '300px', border: '1px solid #ccc', marginTop: '10px' }}>\n        {overlays.map(it => (\n          <Rnd\n            key={it._id}\n            size={{ width: it.width, height: it.height }}\n            position={{ x: it.x, y: it.y }}\n            onDragStop={(e, d) => saveItem(it._id, { ...it, x: d.x, y: d.y })}\n            onResizeStop={(e, direction, ref, delta, position) =>\n              saveItem(it._id, {\n                ...it,\n                width: parseInt(ref.style.width),\n                height: parseInt(ref.style.height),\n                x: position.x,\n                y: position.y,\n              })\n            }\n            bounds=\"parent\"\n            style={{ border: '1px dashed #ddd', background: 'rgba(255,255,255,0.6)' }}\n          >\n            {it.type === 'text' ? (\n              <div style={{ padding: 4 }}>\n                <textarea\n                  value={it.content}\n                  // Update local state immediately\n                  onChange={e =>\n                    setOverlays(prev => prev.map(o => o._id === it._id ? { ...o, content: e.target.value } : o))\n                  }\n                  // Save to backend only on blur\n                  onBlur={e => saveItem(it._id, { ...it, content: e.target.value })}\n                  style={{\n                    width: '100%',\n                    height: '100%',\n                    resize: 'none',\n                    background: 'transparent',\n                    color: 'black',\n                    border: '1px solid #ccc',\n                    padding: '2px'\n                  }}\n                />\n                <button\n                  onClick={e => {\n                    e.stopPropagation();  // prevent Rnd events\n                    e.preventDefault();   // prevent onBlur save\n                    deleteItem(it._id);\n                  }}\n                >\n                  Delete\n                </button>\n              </div>\n            ) : (\n              <img src={it.content} alt=\"overlay\" style={{ width: '100%', height: '100%' }} />\n            )}\n          </Rnd>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}